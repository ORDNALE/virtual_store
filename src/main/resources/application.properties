# -------------------------------------------
# Informações básicas da aplicação
# -------------------------------------------

# Nome da aplicação Spring Boot
spring.application.name=Virtual Store

# Caminho base da aplicação
server.servlet.context-path=/bd_loja_virtual

# -------------------------------------------
# Configuração do banco de dados (PostgreSQL)
# -------------------------------------------

# URL de conexão com o banco
spring.datasource.url=jdbc:postgresql://localhost:5432/bd_loja_virtual?autoReconnect=true&useSSL=false

# Usuário do banco
spring.datasource.username=postgres

# Senha do banco
spring.datasource.password=admin

# Driver JDBC do PostgreSQL
spring.datasource.driver-class-name=org.postgresql.Driver

# -------------------------------------------
# Configuração do JPA e Hibernate
# -------------------------------------------

# Atualiza o schema do banco automaticamente (cuidado em produção)
spring.jpa.hibernate.ddl-auto=update

# Plataforma para scripts SQL
spring.sql.init.platform=postgresql

# Dialeto do Hibernate para PostgreSQL
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Usa metadados do JDBC para inferência de schema
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=true

# Otimizações para inserções e atualizações em lote
spring.jpa.properties.hibernate.jdbc.batch_size=4
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# -------------------------------------------
# Configuração de pool de conexões (HikariCP)
# -------------------------------------------

# Define o HikariCP como pool de conexões
spring.datasource.type=com.zaxxer.hikari.HikariDataSource

# Tempo máximo (ms) para aguardar uma conexão
spring.datasource.hikari.connection-timeout=20000

# Conexões mínimas ociosas no pool
spring.datasource.hikari.minimum-idle=200

# Máximo de conexões no pool
spring.datasource.hikari.maximum-pool-size=550

# Tempo ocioso antes de liberar conexão (ms)
spring.datasource.hikari.idle-timeout=100000

# Nome do pool de conexões
spring.datasource.hikari.pool-name=PoolHukari

# Desabilita auto-commit (controle manual de transações)
spring.datasource.hikari.auto-commit=false

# Prepared statements via DBCP2 (adicionais)
spring.datasource.dbcp2.pool-prepared-statements=true
spring.datasource.dbcp2.max-open-prepared-statements=550

# -------------------------------------------
# Configurações de upload de arquivos
# -------------------------------------------

# Habilita suporte a upload multipart
spring.servlet.multipart.enabled=true

# Tamanho máximo de arquivo (10MB)
spring.servlet.multipart.max-file-size=10000KB

# Tamanho máximo da requisição com múltiplos arquivos
spring.servlet.multipart.max-request-size=10000KB

# -------------------------------------------
# Configurações de compressão HTTP
# -------------------------------------------

# Habilita compressão GZIP
server.compression.enabled=true

# Tipos de MIME que serão comprimidos
server.compression.mime-types=application/json,application/xml,text/html,text/plain,text/css,text/javascript,application/javascript,application/x-javascript,application/octet-stream

# Compressão de respostas a partir de 1KB
server.compression.min-response-size=1024

# Habilita suporte ao HTTP/2
server.http2.enabled=true

# -------------------------------------------
# Codificação padrão das requisições/respostas
# -------------------------------------------

server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true
server.servlet.encoding.force-request=true
server.servlet.encoding.force-response=true

# -------------------------------------------
# Sessões e transações
# -------------------------------------------

# Tempo de sessão do usuário (4 horas)
server.servlet.session.timeout=240m

# Faz rollback se commit falhar
spring.transaction.rollback-on-commit-failure=true

# Limpeza programada da tabela de sessões (todos os dias às 4h)
spring.session.jdbc.cleanup-cron=0 0 4 * * *

# -------------------------------------------
# Configurações do Tomcat (servidor embutido)
# -------------------------------------------

# Máximo de conexões simultâneas permitidas
server.tomcat.max-connections=40000

# Mínimo de threads prontas para uso
server.tomcat.threads.min-spare=1000

# -------------------------------------------
# Acesso a recursos estáticos
# -------------------------------------------

# Caminho para arquivos estáticos (ex: imagens, CSS, JS)
spring.mvc.static-path-pattern=/resource/static/**


